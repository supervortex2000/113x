From 4adf57c82838e226cecfa2006b2d9f17cf088fda Mon Sep 17 00:00:00 2001
From: Tony Paul <Tony_Paul@comcast.com>
Date: Fri, 21 Aug 2020 19:30:50 +0000
Subject: [PATCH 1/1] AMLOGIC-591-Optimize ResidentApp launch
Source: Comcast
License: GPLV2
Upstream-Status: Inappropriate [Comcast specific]
Signed-off-by: Tony Paul <Tony_Paul@comcast.com>
---
 Source/WPEFramework/GenericConfig.cmake | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/Source/WPEFramework/GenericConfig.cmake b/Source/WPEFramework/GenericConfig.cmake
index 81898cfe..f8d44b17 100644
--- a/Source/WPEFramework/GenericConfig.cmake
+++ b/Source/WPEFramework/GenericConfig.cmake
@@ -84,7 +84,7 @@ if (EXTERN_EVENT_LIST_LENGTH GREATER 0)
     endforeach(SUBSYSTEM)
 endif()
 
-if (PLUGIN_WEBSERVER OR PLUGIN_WEBKITBROWSER OR PLUGIN_ESPIAL)
+if (PLUGIN_WEBSERVER OR PLUGIN_WEBKITBROWSER OR PLUGIN_ESPIAL OR PLUGIN_WEBKITBROWSER_RESIDENT_APP)
     #Add ___array___ to the key to force json array creation.
     map_append(${PLUGIN_CONTROLLER_CONFIGURATION} resumes ___array___)
 
@@ -99,6 +99,10 @@ if (PLUGIN_WEBSERVER OR PLUGIN_WEBKITBROWSER OR PLUGIN_ESPIAL)
     if (PLUGIN_WEBSERVER)
         map_append(${PLUGIN_CONTROLLER_CONFIGURATION} resumes WebServer)
     endif (PLUGIN_WEBSERVER)
+
+    if (PLUGIN_WEBKITBROWSER_RESIDENT_APP)
+        map_append(${PLUGIN_CONTROLLER_CONFIGURATION} resumes ResidentApp)
+    endif (PLUGIN_WEBKITBROWSER_RESIDENT_APP)
 endif()
 
 map()
-- 
2.24.0

